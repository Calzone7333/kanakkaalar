import{j as e}from"./ui-Ch41-bI7.js";import{r as l}from"./vendor-Con1GFA2.js";import{g as p,o as f}from"./index-DOyQY1V8.js";import{D as b}from"./download-D6aT7_Ll.js";import{I as j}from"./indian-rupee-DY6BnWee.js";import{T as g}from"./trending-up-B2cijUDO.js";import{B as y}from"./briefcase-CRYDegyu.js";import{U as N}from"./users-BGsoqPKS.js";import{R as v,A as w,C as A,X as E,Y as C,T as k,a as R}from"./charts-lRoDuk9d.js";import"./utils-BMGruD9E.js";function G(){const[a,o]=l.useState([]),[c,x]=l.useState(!0);l.useEffect(()=>{(async()=>{try{const t=p(),r=t==null?void 0:t.user;if(r!=null&&r.email){const u=await f.listAssigned(r.email);o(u.data||[])}}catch(t){console.error("Failed to fetch sales data",t)}finally{x(!1)}})()},[]);const i=a.reduce((s,t)=>s+(t.totalAmount||0),0),d=a.filter(s=>s.status==="COMPLETED").reduce((s,t)=>s+(t.totalAmount||0),0),m=i-d,h=new Set(a.map(s=>s.customerEmail)).size,n=[{name:"Jan",value:0},{name:"Feb",value:0},{name:"Mar",value:0},{name:"Apr",value:0},{name:"May",value:0},{name:"Jun",value:0}];return a.forEach(s=>{if(s.createdAt){const t=new Date(s.createdAt).getMonth();t<6&&(n[t].value+=s.totalAmount||0)}}),c?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sales Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track revenue generation and client acquisition."})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-200 rounded-xl text-sm font-medium text-gray-700 hover:bg-gray-50 transition shadow-sm",children:[e.jsx(b,{className:"w-4 h-4"}),"Export Report"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#5E33AC] to-[#8155D6] p-6 rounded-2xl text-white shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(j,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-xs font-medium bg-white/20 px-2 py-1 rounded-full text-white",children:"+12.5%"})]}),e.jsx("p",{className:"text-purple-200 text-sm font-medium mb-1",children:"Total Revenue Generated"}),e.jsxs("h3",{className:"text-3xl font-bold",children:["₹",(i/1e5).toFixed(2)," Lakh"]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-3 bg-emerald-50 rounded-xl",children:e.jsx(g,{className:"w-6 h-6 text-emerald-600"})})}),e.jsx("p",{className:"text-gray-500 text-sm font-medium mb-1",children:"Realized Revenue"}),e.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["₹",(d/1e3).toFixed(1),"k"]}),e.jsx("p",{className:"text-xs text-emerald-600 mt-2 font-medium",children:"From completed orders"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-3 bg-amber-50 rounded-xl",children:e.jsx(y,{className:"w-6 h-6 text-amber-600"})})}),e.jsx("p",{className:"text-gray-500 text-sm font-medium mb-1",children:"Pipeline Value"}),e.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["₹",(m/1e3).toFixed(1),"k"]}),e.jsx("p",{className:"text-xs text-amber-600 mt-2 font-medium",children:"Potential revenue"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-3 bg-blue-50 rounded-xl",children:e.jsx(N,{className:"w-6 h-6 text-blue-600"})})}),e.jsx("p",{className:"text-gray-500 text-sm font-medium mb-1",children:"Active Clients"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:h}),e.jsx("p",{className:"text-xs text-blue-600 mt-2 font-medium",children:"Across all services"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Revenue Trend"}),e.jsxs("select",{className:"px-3 py-1 bg-gray-50 border border-gray-200 rounded-lg text-sm outline-none",children:[e.jsx("option",{children:"Last 6 Months"}),e.jsx("option",{children:"This Year"})]})]}),e.jsx("div",{className:"h-80 w-full",children:e.jsx(v,{width:"100%",height:"100%",children:e.jsxs(w,{data:n,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#5E33AC",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#5E33AC",stopOpacity:0})]})}),e.jsx(A,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),e.jsx(E,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#9ca3af"}}),e.jsx(C,{axisLine:!1,tickLine:!1,tick:{fill:"#9ca3af"}}),e.jsx(k,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}}),e.jsx(R,{type:"monotone",dataKey:"value",stroke:"#5E33AC",strokeWidth:3,fillOpacity:1,fill:"url(#colorValue)"})]})})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"High Value Orders"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-500 text-xs uppercase font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Client"}),e.jsx("th",{className:"px-6 py-4",children:"Service"}),e.jsx("th",{className:"px-6 py-4",children:"Amount"}),e.jsx("th",{className:"px-6 py-4",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:a.sort((s,t)=>(t.totalAmount||0)-(s.totalAmount||0)).slice(0,5).map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:s.customerEmail}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:s.serviceName||`Order #${s.id}`}),e.jsxs("td",{className:"px-6 py-4 font-bold text-gray-900",children:["₹",(s.totalAmount||0).toLocaleString("en-IN")]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${s.status==="COMPLETED"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:s.status})})]},s.id))})]})})]})]})}export{G as default};
