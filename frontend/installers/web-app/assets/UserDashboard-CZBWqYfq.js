const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-DOyQY1V8.js","./ui-Ch41-bI7.js","./vendor-Con1GFA2.js","./utils-BMGruD9E.js","./index-BQbqlkO5.css"])))=>i.map(i=>d[i]);
import{c as d,g as O,_ as C,M as _,o as k,a as E}from"./index-DOyQY1V8.js";import{j as e}from"./ui-Ch41-bI7.js";import{r as t,b as U,u as z,i as A,O as D}from"./vendor-Con1GFA2.js";import{B as M}from"./bell-DpC3lfXC.js";import{U as I}from"./user-jfsMiT04.js";import{H as R}from"./house-BwISx0l8.js";import{B as L}from"./building-ByZHRTDh.js";import{C as S}from"./calendar-xrUQgiti.js";import{C as B}from"./chart-no-axes-column-MAL1v3V-.js";import"./utils-BMGruD9E.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],T=d("folder-open",H);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],V=d("headphones",G);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],F=d("monitor",$);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],q=d("shield-check",Y);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],j=d("shopping-bag",W);function oe(){const[J,y]=t.useState(!1),[a,p]=t.useState(null),[i,v]=t.useState([]),[b,h]=t.useState(!1),f=t.useRef(null),u=t.useRef(null),l=U(),N=z(),P=s=>{h(!1),l(`/dashboard/user/service-order?orderId=${s}`)};t.useEffect(()=>{const s=O();s!=null&&s.user&&p(s.user),(async()=>{try{const x=(await(await C(async()=>{const{userAPI:c}=await import("./index-DOyQY1V8.js").then(o=>o.r);return{userAPI:c}},__vite__mapDeps([0,1,2,3,4]),import.meta.url)).userAPI.profileImage()).data;if(x instanceof Blob){const c=URL.createObjectURL(x);p(o=>({...o||{},profileBlobUrl:c}))}}catch{}})(),(async()=>{try{const c=((await k.myOrders()).data||[]).filter(o=>o.status==="DRAFT"||o.status==="DOCUMENTS_PENDING"||o.status==="PENDING_PAYMENT");v(c)}catch(n){console.warn("Failed to fetch pending orders",n)}})();const m=n=>{f.current&&!f.current.contains(n.target)&&y(!1),u.current&&!u.current.contains(n.target)&&h(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m),a!=null&&a.profileBlobUrl&&URL.revokeObjectURL(a.profileBlobUrl)}},[N.pathname]),t.useEffect(()=>{const s=async()=>{var r;try{await E.getProfile()}catch(m){((r=m.response)==null?void 0:r.status)===404&&l("/company-setup")}};a&&a.role==="USER"&&s()},[a,l]);const g=[{to:"/dashboard/user/home",label:"Home",icon:e.jsx(R,{size:20})},{to:"/dashboard/user/compliances",label:"Compliances",icon:e.jsx(q,{size:20})},{to:"/dashboard/user/company",label:"Company",icon:e.jsx(L,{size:20})},{to:"/dashboard/user/documents",label:"Documents",icon:e.jsx(T,{size:20})},{to:"/dashboard/user/servicehub",label:"Service Hub",icon:e.jsx(F,{size:20})},{to:"/dashboard/user/my-orders",label:"My Orders",icon:e.jsx(j,{size:20})},{to:"/dashboard/user/calendar",label:"Calendar",icon:e.jsx(S,{size:20})},{to:"/dashboard/user/reports",label:"Reports",icon:e.jsx(B,{size:20})},{to:"/dashboard/user/consult",label:"Consult",icon:e.jsx(V,{size:20})}],w=()=>{const s=g.find(r=>N.pathname.startsWith(r.to));return s?s.label:"Dashboard"};return e.jsxs("div",{className:"dashboard-container",children:[e.jsxs("aside",{className:"sidebar",children:[e.jsxs("div",{className:"sidebar-logo",children:[e.jsx(_,{size:28,className:"text-blue-400"}),e.jsx("span",{children:"MyApp Panel"})]}),e.jsx("nav",{className:"sidebar-nav",children:g.map(s=>e.jsxs(A,{to:s.to,className:({isActive:r})=>r?"nav-item active":"nav-item",children:[s.icon,e.jsx("span",{children:s.label})]},s.to))})]}),e.jsxs("div",{className:"main-wrapper",children:[e.jsxs("header",{className:"dashboard-header",children:[e.jsx("h1",{className:"header-title",children:w()}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"relative",ref:u,children:[e.jsxs("button",{className:"header-icon-btn relative",onClick:()=>h(!b),title:"Pending Orders",children:[e.jsx(j,{size:20}),i.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-4 w-4 flex items-center justify-center",children:i.length})]}),b&&e.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-white rounded-lg shadow-xl border border-gray-200 z-50 overflow-hidden",children:[e.jsxs("div",{className:"p-3 bg-gray-50 border-b border-gray-100 flex justify-between items-center",children:[e.jsx("h3",{className:"font-semibold text-gray-700",children:"Pending Applications"}),e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full",children:[i.length," items"]})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:i.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"No pending orders found."}):e.jsx("div",{className:"divide-y divide-gray-100",children:i.map(s=>e.jsxs("div",{className:"p-3 hover:bg-gray-50 cursor-pointer transition",onClick:()=>P(s.id),children:[e.jsx("p",{className:"font-medium text-gray-800 text-sm truncate",children:s.serviceName}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.createdAt).toLocaleDateString()}),e.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded ${s.status==="PENDING_PAYMENT"?"text-orange-600 bg-orange-50":s.status==="DOCUMENTS_PENDING"?"text-blue-600 bg-blue-50":"text-gray-600 bg-gray-100"}`,children:s.status==="PENDING_PAYMENT"?"Payment Pending":s.status==="DOCUMENTS_PENDING"?"Docs Uploaded":"Draft"})]})]},s.id))})}),i.length>0&&e.jsx("div",{className:"p-2 bg-gray-50 border-t border-gray-100",children:e.jsx("button",{onClick:()=>{h(!1),l("/dashboard/user/my-orders")},className:"w-full text-center text-sm text-blue-600 font-medium hover:text-blue-800 py-1",children:"View All Orders"})})]})]}),e.jsx("button",{className:"header-icon-btn",onClick:()=>l("/dashboard/user/notifications"),title:"Notifications",children:e.jsx(M,{size:20})}),e.jsx("button",{className:"profile-image-btn",onClick:()=>l("/dashboard/user/profile"),title:"Profile",children:e.jsx("div",{className:"profile-placeholder",children:a!=null&&a.profileBlobUrl?e.jsx("img",{src:a.profileBlobUrl,alt:"User"}):e.jsx(I,{size:20})})})]})]}),e.jsx("main",{className:"content-container",children:e.jsx("div",{className:"content-card",children:e.jsx(D,{})})})]})]})}export{oe as default};
