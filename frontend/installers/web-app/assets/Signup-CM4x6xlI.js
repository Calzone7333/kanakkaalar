import{j as e}from"./ui-Ch41-bI7.js";import{r as l,b as k}from"./vendor-Con1GFA2.js";import{a as y}from"./utils-BMGruD9E.js";function G(){const[i,N]=l.useState(""),[r,S]=l.useState(""),[d,P]=l.useState(""),[u,f]=l.useState(""),[b,h]=l.useState(null),[c,x]=l.useState(null),[n,v]=l.useState(!1),[m,s]=l.useState(null),[U,C]=l.useState(!1),E=k(),I=a=>/\S+@\S+\.\S+/.test(a),L=a=>/^[0-9+\-() ]{7,20}$/.test(a),F=a=>{s(null);const o=a.target.files[0];if(o){if(!["image/jpeg","image/png","image/svg+xml"].includes(o.type)){s("Invalid file type. Please select a PNG, JPG, or SVG image."),h(null),x(null);return}h(o),x(URL.createObjectURL(o))}};l.useEffect(()=>()=>{c&&URL.revokeObjectURL(c)},[c]);const R=async a=>{var o,g,w,j;if(a.preventDefault(),s(null),!i||!r||!d||!u)return s("All fields are required");if(i.length<2||i.length>100)return s("Full name must be between 2 and 100 characters");if(!I(r))return s("Enter a valid email");if(!L(d))return s("Enter a valid phone number");if(u.length<8)return s("Password must be at least 8 characters");v(!0);try{const t=new FormData;t.append("fullName",i),t.append("email",r),t.append("phone",d),t.append("password",u),b&&t.append("profileImage",b),await y.post("/api/auth/signup",t);try{await y.post("/api/auth/request-email-otp",{email:r})}catch(p){console.warn("Could not send OTP email:",(p==null?void 0:p.message)||p)}s("Signup successful! We've sent a verification code to your email."),C(!0),f(""),E(`/verify-otp?email=${encodeURIComponent(r)}`)}catch(t){s(((g=(o=t==null?void 0:t.response)==null?void 0:o.data)==null?void 0:g.error)||((j=(w=t==null?void 0:t.response)==null?void 0:w.data)==null?void 0:j.message)||"Signup failed. Try again later")}finally{v(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:e.jsxs("div",{className:"w-full max-w-md p-6 bg-white rounded shadow-lg",children:[e.jsx("h2",{className:"mb-6 text-xl font-semibold text-center",children:"Create New Account"}),e.jsxs("form",{onSubmit:R,children:[e.jsxs("div",{className:"flex flex-col items-center mb-4",children:[e.jsx("label",{htmlFor:"profile-image-upload",className:"cursor-pointer",children:e.jsx("img",{src:c||"https://via.placeholder.com/100?text=Avatar",alt:"Profile Preview",className:"w-24 h-24 rounded-full object-cover border-2 border-slate-300"})}),e.jsx("input",{id:"profile-image-upload",type:"file",accept:"image/png, image/jpeg, image/svg+xml",onChange:F,className:"hidden",disabled:n})]}),e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Full Name"}),e.jsx("input",{value:i,onChange:a=>N(a.target.value),disabled:n,className:"mt-2 w-full border border-slate-300 px-3 py-2 rounded focus:ring-[#003366] focus:border-[#003366] outline-none disabled:bg-slate-100",placeholder:"Full name"}),e.jsx("label",{className:"block mt-4 text-sm font-medium text-slate-700",children:"Email"}),e.jsx("input",{type:"email",value:r,onChange:a=>S(a.target.value),disabled:n,className:"mt-2 w-full border border-slate-300 px-3 py-2 rounded focus:ring-[#003366] focus:border-[#003366] outline-none disabled:bg-slate-100",placeholder:"you@domain.com"}),e.jsx("label",{className:"block mt-4 text-sm font-medium text-slate-700",children:"Phone"}),e.jsx("input",{type:"tel",value:d,onChange:a=>P(a.target.value),disabled:n,className:"mt-2 w-full border border-slate-300 px-3 py-2 rounded focus:ring-[#003366] focus:border-[#003366] outline-none disabled:bg-slate-100",placeholder:"e.g. 9876543210"}),e.jsx("label",{className:"block mt-4 text-sm font-medium text-slate-700",children:"Password"}),e.jsx("input",{type:"password",value:u,onChange:a=>f(a.target.value),disabled:n,className:"mt-2 w-full border border-slate-300 px-3 py-2 rounded focus:ring-[#003366] focus:border-[#003366] outline-none disabled:bg-slate-100",placeholder:"Choose a password"}),e.jsx("button",{type:"submit",disabled:n,className:"mt-6 w-full bg-[#003366] text-white py-2 rounded transition-colors hover:bg-[#002244] disabled:bg-slate-400",children:n?"Signing up...":"Sign up"})]}),m&&e.jsx("div",{className:`mt-4 p-3 rounded text-sm ${m.toLowerCase().includes("success")||m.toLowerCase().includes("signup successful")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:m})]})})}export{G as default};
