import{j as t}from"./ui-Ch41-bI7.js";import{r}from"./vendor-Con1GFA2.js";import{S as j}from"./StatCard-bJQXbmDD.js";import{D as N}from"./DataTable-BQ4BDS1t.js";import{l as A}from"./index-DOyQY1V8.js";import{A as T}from"./AddLeadModal-Bic4Dp5Y.js";import{U}from"./users-BGsoqPKS.js";import{T as D}from"./trending-up-B2cijUDO.js";import{T as P}from"./trending-down-BZz3eVSk.js";import{P as E}from"./phone-nNvOHFHm.js";import"./plus-BU_M-nSH.js";import"./search-D_R02uDR.js";import"./trash-2-z8U7xTc_.js";import"./utils-BMGruD9E.js";const V=()=>{const[i,m]=r.useState([]),[l,g]=r.useState({newLeads:0,convertedLeads:0,lostLeads:0,followUps:0}),[u,b]=r.useState(!0),[x,n]=r.useState(!1),[d,p]=r.useState("");r.useEffect(()=>{c()},[]);const c=async()=>{try{const s=((await A.getAll()).data||[]).map((a,S)=>({...a,id:a.id?a.id:`lead-${S}-${Date.now()}`}));m(s);const C=s.filter(a=>a.status==="New").length,y=s.filter(a=>a.status==="Converted").length,k=s.filter(a=>a.status==="Lost").length,v=s.filter(a=>a.status==="Contacted").length;g({newLeads:C,convertedLeads:y,lostLeads:k,followUps:v})}catch(e){console.error("Failed to fetch leads:",e)}finally{b(!1)}},f=e=>{c()},L=[{title:"New Leads Today",value:l.newLeads,icon:t.jsx(U,{className:"w-6 h-6"}),bgColor:"bg-blue-50",iconColor:"text-blue-600"},{title:"Converted Leads",value:l.convertedLeads,icon:t.jsx(D,{className:"w-6 h-6"}),bgColor:"bg-green-50",iconColor:"text-green-600"},{title:"Lost Leads",value:l.lostLeads,icon:t.jsx(P,{className:"w-6 h-6"}),bgColor:"bg-red-50",iconColor:"text-red-600"},{title:"Follow-ups",value:l.followUps,icon:t.jsx(E,{className:"w-6 h-6"}),bgColor:"bg-amber-50",iconColor:"text-amber-600"}],h=e=>{switch(e){case"New":return"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400";case"Contacted":return"bg-amber-100 text-amber-700 dark:bg-amber-900/20 dark:text-amber-400";case"Converted":return"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400";case"Lost":return"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-700 dark:bg-gray-900/20 dark:text-gray-400"}},w=i.filter(e=>{var o,s;return((o=e.name)==null?void 0:o.toLowerCase().includes(d.toLowerCase()))||((s=e.email)==null?void 0:s.toLowerCase().includes(d.toLowerCase()))});return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Lead Management"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Track and manage potential customer leads"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:L.map((e,o)=>t.jsx(j,{...e},o))}),t.jsx(N,{loading:u,title:"All Leads",columns:[{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"phone",label:"Phone"},{key:"service",label:"Source/Service"},{key:"ownerName",label:"Assigned To"},{key:"status",label:"Status",render:e=>t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${h(e)}`,children:e})}],data:w,searchPlaceholder:"Search by name or email...",searchTerm:d,onSearchChange:e=>p(e.target.value),onAdd:()=>n(!0)}),t.jsx(T,{isOpen:x,onClose:()=>n(!1),onLeadAdded:f})]})};export{V as default};
