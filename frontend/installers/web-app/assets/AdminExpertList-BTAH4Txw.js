import{j as e}from"./ui-Ch41-bI7.js";import{r as i}from"./vendor-Con1GFA2.js";import{e as x,X as F}from"./index-DOyQY1V8.js";import{z as r}from"./index-CetDmz67.js";import{P as q}from"./plus-BU_M-nSH.js";import{S as z}from"./search-D_R02uDR.js";import{S as A}from"./star-DuKj8BJp.js";import{S as L}from"./square-pen-BrLxDoPl.js";import{T as P}from"./trash-2-z8U7xTc_.js";import{U}from"./upload-DvxPVsCh.js";import"./utils-BMGruD9E.js";function X(){const[j,v]=i.useState([]),[D,N]=i.useState(!0),[m,y]=i.useState(""),[w,n]=i.useState(!1),[o,g]=i.useState(null),[c,h]=i.useState(null),[a,t]=i.useState({name:"",qualification:"",experience:"",rating:5,reviews:0,languages:"",specialization:"",price:"",available:!0,bio:""});i.useEffect(()=>{u()},[]);const u=async()=>{try{const s=await x.getAll();v(s.data)}catch(s){console.error("Failed to fetch experts",s),r.error("Failed to load experts")}finally{N(!1)}},C=s=>{s.target.files&&s.target.files[0]&&h(s.target.files[0])},E=async s=>{s.preventDefault();try{const l={...a,languages:a.languages.split(",").map(p=>p.trim()),specialization:a.specialization.split(",").map(p=>p.trim())},d=new FormData;d.append("data",JSON.stringify(l)),c&&d.append("file",c),o?(await x.update(o.id,d),r.success("Expert updated successfully")):(await x.create(d),r.success("Expert created successfully")),n(!1),u()}catch(l){console.error("Failed to save expert",l),r.error("Failed to save expert")}},k=async s=>{if(window.confirm("Are you sure you want to delete this expert?"))try{await x.delete(s),r.success("Expert deleted"),u()}catch(l){console.error("Failed to delete expert",l),r.error("Failed to delete expert")}},f=(s=null)=>{h(null),s?(g(s),t({name:s.name,qualification:s.qualification,experience:s.experience,rating:s.rating,reviews:s.reviews,languages:s.languages?s.languages.join(", "):"",specialization:s.specialization?s.specialization.join(", "):"",price:s.price,available:s.available,bio:s.bio||""})):(g(null),t({name:"",qualification:"",experience:"",rating:5,reviews:0,languages:"",specialization:"",price:"",available:!0,bio:""})),n(!0)},b=j.filter(s=>s.name.toLowerCase().includes(m.toLowerCase())||s.qualification.toLowerCase().includes(m.toLowerCase())),S=s=>s.image?`data:${s.imageContentType};base64,${s.image}`:`http://localhost:8081/api/experts/${s.id}/image`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Manage Experts"}),e.jsx("p",{className:"text-slate-500",children:"Add or edit consultation experts."})]}),e.jsxs("button",{onClick:()=>f(),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-indigo-700 transition",children:[e.jsx(q,{className:"w-4 h-4"})," Add Expert"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-slate-200 bg-slate-50 flex items-center gap-4",children:e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search experts...",value:m,onChange:s=>y(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600 font-medium border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Expert"}),e.jsx("th",{className:"px-6 py-4",children:"Qualification"}),e.jsx("th",{className:"px-6 py-4",children:"Experience"}),e.jsx("th",{className:"px-6 py-4",children:"Price"}),e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[b.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50/50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:S(s),onError:l=>{l.target.onerror=null,l.target.src=`https://ui-avatars.com/api/?name=${s.name}&background=random`},alt:s.name,className:"w-10 h-10 rounded-full object-cover bg-slate-100"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:s.name}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(A,{className:"w-3 h-3 text-amber-400 fill-current"}),s.rating," (",s.reviews,")"]})]})]})}),e.jsx("td",{className:"px-6 py-4 text-slate-600",children:s.qualification}),e.jsx("td",{className:"px-6 py-4 text-slate-600",children:s.experience}),e.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:s.price}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.available?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s.available?"Available":"Unavailable"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>f(s),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition",children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>k(s.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition",children:e.jsx(P,{className:"w-4 h-4"})})]})})]},s.id)),b.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-12 text-center text-slate-500",children:"No experts found."})})]})]})})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-xl",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center sticky top-0 bg-white z-10",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:o?"Edit Expert":"Add New Expert"}),e.jsx("button",{onClick:()=>n(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx(F,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:E,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Full Name"}),e.jsx("input",{required:!0,value:a.name,onChange:s=>t({...a,name:s.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Qualification"}),e.jsx("input",{required:!0,value:a.qualification,onChange:s=>t({...a,qualification:s.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Experience"}),e.jsx("input",{required:!0,value:a.experience,onChange:s=>t({...a,experience:s.target.value}),placeholder:"e.g. 10 Years",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Price"}),e.jsx("input",{required:!0,value:a.price,onChange:s=>t({...a,price:s.target.value}),placeholder:"e.g. â‚¹1500",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Rating"}),e.jsx("input",{type:"number",step:"0.1",max:"5",value:a.rating,onChange:s=>t({...a,rating:parseFloat(s.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Reviews Count"}),e.jsx("input",{type:"number",value:a.reviews,onChange:s=>t({...a,reviews:parseInt(s.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Profile Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-300 rounded-lg cursor-pointer hover:bg-slate-50 transition",children:[e.jsx(U,{className:"w-4 h-4 text-slate-500"}),e.jsx("span",{className:"text-sm text-slate-600",children:"Choose File"}),e.jsx("input",{type:"file",accept:"image/*",onChange:C,className:"hidden"})]}),c&&e.jsx("span",{className:"text-sm text-slate-600",children:c.name})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Languages (comma separated)"}),e.jsx("input",{value:a.languages,onChange:s=>t({...a,languages:s.target.value}),placeholder:"English, Hindi, Tamil",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Specialization (comma separated)"}),e.jsx("input",{value:a.specialization,onChange:s=>t({...a,specialization:s.target.value}),placeholder:"GST, Income Tax, Corporate Law",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Bio"}),e.jsx("textarea",{rows:"3",value:a.bio,onChange:s=>t({...a,bio:s.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"available",checked:a.available,onChange:s=>t({...a,available:s.target.checked}),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"available",className:"text-sm font-medium text-slate-700",children:"Available for booking"})]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg font-medium transition",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg font-medium transition shadow-sm shadow-indigo-200",children:o?"Update Expert":"Create Expert"})]})]})]})})]})}export{X as default};
