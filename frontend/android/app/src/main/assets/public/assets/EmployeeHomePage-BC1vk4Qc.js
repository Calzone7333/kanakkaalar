import{j as e}from"./ui-Ch41-bI7.js";import{r as o,b as E}from"./vendor-Con1GFA2.js";import{c as S,A as P,g as k,u as D,h as I,o as R}from"./index-SiRpZdc4.js";import{C as f}from"./clipboard-check-Cee7hyQR.js";import{C as L}from"./clock-BPY9lf2r.js";import{C as T}from"./circle-check-big-5mARxVgZ.js";import{F as O}from"./file-text-Dslcny1G.js";import{I as M}from"./indian-rupee-CkBkjmAn.js";import{C as F}from"./calendar-DkqJ-Bi6.js";import{E as _}from"./eye-rUo02T12.js";import"./utils-BMGruD9E.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],U=S("megaphone",H);function Z(){var p;const[t,c]=o.useState(null),[n,d]=o.useState(null),[m,h]=o.useState(null),[l,j]=o.useState([]),[N,g]=o.useState(!0),u=E();o.useEffect(()=>{(async()=>{const a=k(),r=a==null?void 0:a.user;if(c(r),r!=null&&r.hasProfileImage)try{const i=await D.profileImage(),C=URL.createObjectURL(i.data);d(C)}catch(i){console.error("Failed to load profile image",i)}r!=null&&r.email?y(r.email):g(!1)})()},[]);const y=async s=>{try{g(!0),console.log("EmployeeHomePage: Fetching data for email:",s);const[a,r]=await Promise.all([I.status("EMPLOYEE",s),R.listAssigned(s)]);console.log("EmployeeHomePage: Stats response:",a),console.log("EmployeeHomePage: Tasks response:",r),h(a.data);const i=Array.isArray(r.data)?r.data:[];j(i)}catch(a){console.error("Failed to fetch dashboard data:",a)}finally{g(!1)}},v=l.length,b=l.filter(s=>s.status==="IN_PROGRESS"||s.status==="ASSIGNED").length,w=l.filter(s=>s.status==="COMPLETED").length;l.reduce((s,a)=>s+(a.totalAmount||0),0);const A=s=>u(`/dashboard/employee/task/${s}`);return N?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"relative w-16 h-16",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-indigo-200 rounded-full opacity-25"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full border-4 border-indigo-600 rounded-full border-t-transparent animate-spin"})]})}):e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-[#5E33AC] to-[#8155D6] rounded-3xl p-8 text-white shadow-xl",children:[e.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-64 h-64 bg-white opacity-10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-48 h-48 bg-purple-400 opacity-10 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-start md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-white/20 rounded-full backdrop-blur-sm",children:new Date().toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})}),e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:["Welcome back, ",((p=t==null?void 0:t.fullName)==null?void 0:p.split(" ")[0])||"Employee","! ðŸ‘‹"]}),e.jsxs("p",{className:"text-purple-100 text-lg max-w-xl",children:["You have ",e.jsxs("span",{className:"font-bold text-white",children:[b," active tasks"]})," requiring your attention today."]})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-white/10 p-4 rounded-2xl backdrop-blur-md border border-white/10",children:[e.jsx("img",{src:n||"https://storage.googleapis.com/tagjs-prod.appspot.com/v1/wubvUxErdY/wgo6e9kp_expires_30_days.png",alt:"Profile",className:"w-14 h-14 rounded-full border-2 border-white/50 object-cover"}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsx("p",{className:"font-semibold text-white",children:t==null?void 0:t.fullName}),e.jsx("p",{className:"text-sm text-purple-200",children:t==null?void 0:t.email})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(x,{icon:e.jsx(f,{className:"w-6 h-6"}),label:"Total Assigned",value:v,trend:"+12% this month",color:"bg-blue-500",textColor:"text-blue-600",bgColor:"bg-blue-50"}),e.jsx(x,{icon:e.jsx(L,{className:"w-6 h-6"}),label:"In Progress",value:b,trend:"5 due soon",color:"bg-amber-500",textColor:"text-amber-600",bgColor:"bg-amber-50"}),e.jsx(x,{icon:e.jsx(T,{className:"w-6 h-6"}),label:"Completed",value:w,trend:"98% success rate",color:"bg-emerald-500",textColor:"text-emerald-600",bgColor:"bg-emerald-50"}),e.jsx(x,{icon:e.jsx(O,{className:"w-6 h-6"}),label:"Documents",value:(m==null?void 0:m.documentsForAssignedOrders)||0,trend:"Pending verification",color:"bg-purple-500",textColor:"text-purple-600",bgColor:"bg-purple-50"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Recent Tasks"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your assigned orders"})]}),e.jsxs("button",{onClick:()=>u("/dashboard/employee/tasks"),className:"flex items-center gap-1 text-sm font-medium text-[#5E33AC] hover:text-[#4a288a] transition-colors",children:["View All ",e.jsx(P,{className:"w-4 h-4"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:l.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(f,{className:"w-8 h-8 text-gray-300"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No tasks found"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"You don't have any assigned tasks yet."})]}):e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50/50 text-gray-500 text-xs uppercase font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Task / Order"}),e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4",children:"Amount"}),e.jsx("th",{className:"px-6 py-4",children:"Deadline"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l.slice(0,5).map(s=>{var a;return e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-indigo-50 flex items-center justify-center text-indigo-600 font-bold text-sm",children:s.serviceName?s.serviceName.charAt(0):"#"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.serviceName||`Order #${s.id}`}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",s.id]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(G,{status:s.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center text-gray-700 font-medium",children:[e.jsx(M,{className:"w-3 h-3 mr-1"}),((a=s.totalAmount)==null?void 0:a.toLocaleString("en-IN"))||0]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center text-gray-500 text-sm",children:[e.jsx(F,{className:"w-3.5 h-3.5 mr-2"}),s.createdAt?new Date(s.createdAt).toLocaleDateString("en-IN"):"N/A"]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>A(s.id),className:"p-2 text-gray-400 hover:text-[#5E33AC] hover:bg-indigo-50 rounded-lg transition-all",title:"View Details",children:e.jsx(_,{className:"w-5 h-5"})})})]},s.id)})})]})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl p-6 border border-amber-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-amber-100 rounded-lg text-amber-600",children:e.jsx(U,{className:"w-5 h-5"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Announcements"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white/60 p-4 rounded-xl backdrop-blur-sm border border-amber-100/50",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 mb-1",children:"ðŸ“… Monthly Review"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Review meeting scheduled for 15th Nov 2025. Please update all task statuses."})]}),e.jsxs("div",{className:"bg-white/60 p-4 rounded-xl backdrop-blur-sm border border-amber-100/50",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 mb-1",children:"ðŸš€ New Feature"}),e.jsx("p",{className:"text-xs text-gray-600",children:"The new document verification system is live. Check the docs tab."})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Performance"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Task Completion"}),e.jsx("span",{className:"font-medium text-gray-900",children:"85%"})]}),e.jsx("div",{className:"w-full bg-gray-100 rounded-full h-2",children:e.jsx("div",{className:"bg-[#5E33AC] h-2 rounded-full",style:{width:"85%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Client Satisfaction"}),e.jsx("span",{className:"font-medium text-gray-900",children:"4.8/5.0"})]}),e.jsx("div",{className:"w-full bg-gray-100 rounded-full h-2",children:e.jsx("div",{className:"bg-emerald-500 h-2 rounded-full",style:{width:"96%"}})})]})]})]})]})]})]})}function x({icon:t,label:c,value:n,trend:d,color:m,textColor:h,bgColor:l}){return e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${l} ${h} group-hover:scale-110 transition-transform duration-300`,children:t}),d&&e.jsx("span",{className:"text-xs font-medium px-2 py-1 bg-gray-50 text-gray-600 rounded-full",children:d})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-1",children:n}),e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:c})]})]})}function G({status:t}){const d={COMPLETED:"bg-emerald-100 text-emerald-700 border-emerald-200",IN_PROGRESS:"bg-blue-100 text-blue-700 border-blue-200",PENDING:"bg-amber-100 text-amber-700 border-amber-200",ASSIGNED:"bg-purple-100 text-purple-700 border-purple-200",FAILED:"bg-red-100 text-red-700 border-red-200"}[t]||"bg-gray-100 text-gray-700 border-gray-200";return e.jsx("span",{className:`px-2.5 py-1 text-xs font-semibold rounded-full border ${d}`,children:(t==null?void 0:t.replace(/_/g," "))||"UNKNOWN"})}export{Z as default};
