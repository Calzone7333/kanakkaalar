import{j as e}from"./ui-Ch41-bI7.js";import{r as l}from"./vendor-Con1GFA2.js";import{b as u}from"./index-SiRpZdc4.js";import{S as j}from"./search-C-O3bJ5K.js";import{B as N}from"./building-BSvw-hri.js";import{F as f}from"./file-text-Dslcny1G.js";import"./utils-BMGruD9E.js";function L(){const[x,d]=l.useState([]),[o,m]=l.useState(!0),[r,p]=l.useState("");l.useEffect(()=>{h()},[]);const h=async()=>{try{const s=await u.getAllProfiles();d(s.data)}catch(s){console.error("Failed to fetch companies",s)}finally{m(!1)}},i=x.filter(s=>{var a,t,n,c;return((a=s.businessName)==null?void 0:a.toLowerCase().includes(r.toLowerCase()))||((n=(t=s.user)==null?void 0:t.email)==null?void 0:n.toLowerCase().includes(r.toLowerCase()))||((c=s.panNumber)==null?void 0:c.toLowerCase().includes(r.toLowerCase()))});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Registered Companies"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"View and manage all user company profiles"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search companies...",value:r,onChange:s=>p(s.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none w-64"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm text-gray-600",children:[e.jsx("thead",{className:"bg-gray-50 text-xs uppercase font-semibold text-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Business Name"}),e.jsx("th",{className:"px-6 py-4",children:"User"}),e.jsx("th",{className:"px-6 py-4",children:"Type"}),e.jsx("th",{className:"px-6 py-4",children:"Incorporation"}),e.jsx("th",{className:"px-6 py-4",children:"Tax Info"}),e.jsx("th",{className:"px-6 py-4",children:"Balance Sheet"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:o?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"Loading companies..."})}):i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"No companies found matching your search."})}):i.map(s=>{var a,t;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-blue-100 flex items-center justify-center text-blue-600",children:e.jsx(N,{size:16})}),e.jsx("span",{className:"font-medium text-gray-900",children:s.businessName})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-900 font-medium",children:((a=s.user)==null?void 0:a.fullName)||"N/A"}),e.jsx("span",{className:"text-xs text-gray-500",children:(t=s.user)==null?void 0:t.email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-xs font-medium text-gray-700",children:s.businessType})}),e.jsx("td",{className:"px-6 py-4",children:s.incorporationDate}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("span",{className:"text-xs",children:["GST: ",s.gstin||"-"]}),e.jsxs("span",{className:"text-xs",children:["PAN: ",s.panNumber]})]})}),e.jsx("td",{className:"px-6 py-4",children:s.balanceSheetUrl?e.jsxs("a",{href:s.balanceSheetUrl,target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:text-blue-800 flex items-center gap-1 text-xs font-medium",children:[e.jsx(f,{size:14})," View"]}):e.jsx("span",{className:"text-gray-400 text-xs",children:"Not uploaded"})})]},s.id)})})]})})})]})}export{L as default};
