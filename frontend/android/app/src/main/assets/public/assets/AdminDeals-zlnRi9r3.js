const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-SiRpZdc4.js","./ui-Ch41-bI7.js","./vendor-Con1GFA2.js","./utils-BMGruD9E.js","./index-CURB5bqv.css"])))=>i.map(i=>d[i]);
import{j as e}from"./ui-Ch41-bI7.js";import{r as o,c as Z}from"./vendor-Con1GFA2.js";import{S as P}from"./StatCard-Dumc55b0.js";import{C as _}from"./ChartCard-jjp_hlOM.js";import{D as H}from"./DataTable-D4UWD7Zb.js";import{c as z,X as U,_ as M,g as ee,i as te,o as W,q as se}from"./index-SiRpZdc4.js";import{D as ae}from"./dollar-sign-vxx03qH8.js";import{T as le}from"./target-BXaT95Cx.js";import{Z as re}from"./zap-BUv7vm3-.js";import{T as oe}from"./trending-up-WamTlgRe.js";import{R as $,e as ne,C as ie,X as de,Y as ce,T as F,L as ue,f as T,P as me,b as ge,c as xe}from"./charts-lRoDuk9d.js";import"./trending-down-DEibCJBa.js";import"./plus-BBYXCYuW.js";import"./search-C-O3bJ5K.js";import"./trash-2-i4V96l9G.js";import"./utils-BMGruD9E.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],pe=z("layout-grid",he);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],ye=z("list",be),fe=({isOpen:b,onClose:h,onDealAdded:u})=>{const[n,f]=o.useState({name:"",customer:"",amount:"",stage:"Lead In",probability:20,owner:"",dueDate:""}),[j,m]=o.useState(""),[w,g]=o.useState(!1),[v,C]=o.useState([]),[N,S]=o.useState(!1);Z.useEffect(()=>{(async()=>{try{const{userAPI:i}=await M(async()=>{const{userAPI:r}=await import("./index-SiRpZdc4.js").then(y=>y.v);return{userAPI:r}},__vite__mapDeps([0,1,2,3,4]),import.meta.url),p=await i.getAll();C(p.data.users||[])}catch(i){console.error("Failed to fetch users",i)}})()},[]);const x=a=>{const{name:i,value:p}=a.target;f(r=>({...r,[i]:p}))},c=async a=>{var i,p;if(a.preventDefault(),!n.name||!n.customer||!n.amount){m("Name, Customer, and Amount are required.");return}g(!0),m("");try{const{token:r}=ee(),{dealAPI:y}=await M(async()=>{const{dealAPI:L}=await import("./index-SiRpZdc4.js").then(I=>I.v);return{dealAPI:L}},__vite__mapDeps([0,1,2,3,4]),import.meta.url),E=await y.create(n);u(E.data),h(),f({name:"",customer:"",amount:"",stage:"Lead In",probability:20,owner:"",dueDate:""})}catch(r){r.response&&r.response.status===404?(console.warn("Deals endpoint not found, adding locally for demo"),u({...n,id:Date.now()}),h()):(m(((p=(i=r.response)==null?void 0:i.data)==null?void 0:p.message)||"Failed to add deal. Please try again."),console.error("Add deal error:",r))}finally{g(!1)}};return b?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-md relative overflow-y-auto max-h-[90vh]",children:[e.jsx("button",{onClick:h,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:e.jsx(U,{size:24})}),e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add New Deal"}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deal Name"}),e.jsx("input",{type:"text",name:"name",value:n.name,onChange:x,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Customer"}),N?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",name:"customer",placeholder:"Customer Name/Email",value:n.customer,onChange:x,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0}),e.jsx("button",{type:"button",onClick:()=>{S(!1),f(a=>({...a,customer:""}))},className:"text-sm text-blue-600 hover:underline",children:"Select Existing"})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{name:"customer",value:n.customer,onChange:x,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[e.jsx("option",{value:"",children:"Select a customer..."}),v.map(a=>e.jsxs("option",{value:a.email,children:[a.fullName," (",a.email,")"]},a.id))]}),e.jsx("button",{type:"button",onClick:()=>{S(!0),f(a=>({...a,customer:""}))},className:"mt-1 px-3 py-2 bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200 text-sm whitespace-nowrap",children:"+ New"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),e.jsx("input",{type:"text",name:"amount",value:n.amount,onChange:x,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Stage"}),e.jsxs("select",{name:"stage",value:n.stage,onChange:x,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[e.jsx("option",{value:"Lead In",children:"Lead In"}),e.jsx("option",{value:"Qualification",children:"Qualification"}),e.jsx("option",{value:"Proposal Sent",children:"Proposal Sent"}),e.jsx("option",{value:"Negotiation",children:"Negotiation"}),e.jsx("option",{value:"Closed Won",children:"Closed Won"}),e.jsx("option",{value:"Closed Lost",children:"Closed Lost"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Probability (%)"}),e.jsx("input",{type:"number",name:"probability",value:n.probability,onChange:x,min:"0",max:"100",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Owner"}),e.jsx("input",{type:"text",name:"owner",value:n.owner,onChange:x,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Due Date"}),e.jsx("input",{type:"date",name:"dueDate",value:n.dueDate,onChange:x,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),j&&e.jsx("p",{className:"text-sm text-red-600",children:j}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[e.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:w,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-300",children:w?"Adding...":"Add Deal"})]})]})]})}):null},je=({isOpen:b,onClose:h,deal:u,onAssigned:n})=>{const[f,j]=o.useState([]),[m,w]=o.useState(""),[g,v]=o.useState(!1),[C,N]=o.useState("");o.useEffect(()=>{b&&S()},[b]);const S=async()=>{var c;try{const a=await te.listEmployees(),i=Array.isArray(a.data)?a.data:((c=a.data)==null?void 0:c.employees)||[];j(i)}catch(a){console.error("Failed to fetch employees:",a),N("Failed to load employees")}},x=async c=>{if(c.preventDefault(),!m){N("Please select an employee");return}v(!0),N("");try{if(u.type==="order")await W.assign(u.rawId,{assigneeEmail:m});else{const{dealAPI:a}=await M(async()=>{const{dealAPI:i}=await import("./index-SiRpZdc4.js").then(p=>p.v);return{dealAPI:i}},__vite__mapDeps([0,1,2,3,4]),import.meta.url);await a.update(u.rawId,{owner:m})}n(u.id,m),h()}catch(a){console.error("Failed to assign deal:",a),N("Failed to assign deal. Please try again.")}finally{v(!1)}};return b?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-md relative",children:[e.jsx("button",{onClick:h,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:e.jsx(U,{size:24})}),e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Assign Deal"}),e.jsxs("p",{className:"mb-4 text-gray-600",children:["Assigning ",e.jsx("strong",{children:u==null?void 0:u.name})," to an employee."]}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Select Employee"}),e.jsxs("select",{value:m,onChange:c=>w(c.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-200 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"-- Select Employee --"}),f.map(c=>e.jsxs("option",{value:c.email,children:[c.fullName," (",c.email,")"]},c.id))]})]}),C&&e.jsx("p",{className:"text-sm text-red-600",children:C}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[e.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-300",children:g?"Assigning...":"Assign"})]})]})]})}):null},Fe=()=>{const[b,h]=o.useState("all"),[u,n]=o.useState("all"),[f,j]=o.useState(!1),[m,w]=o.useState("list"),[g,v]=o.useState([]),[C,N]=o.useState(!0);o.useEffect(()=>{(async()=>{try{const[s,k]=await Promise.all([W.getAll(),se.getAll()]),d=s.data||[],A=k.data||[],X=d.map(l=>({id:`order-${l.id}`,rawId:l.id,type:"order",name:l.serviceName||`Order #${l.id}`,customer:l.customerEmail||"Unknown",amount:l.totalAmount||0,stage:S(l.status),probability:x(l.status),owner:l.assigneeEmail||"Unassigned",dueDate:l.createdAt?new Date(l.createdAt).toLocaleDateString():"N/A",originalStatus:l.status})),Y=[...A.map(l=>({id:`deal-${l.id}`,rawId:l.id,type:"deal",name:l.name,customer:l.customer,amount:l.amount,stage:l.stage,probability:l.probability,owner:l.owner||"Unassigned",dueDate:l.dueDate||"N/A",originalStatus:null})),...X];v(Y)}catch(s){console.error("Failed to fetch deals:",s)}finally{N(!1)}})()},[]);const S=t=>{if(!t)return"Lead In";const s=t.toUpperCase();return s.includes("CREATED")||s.includes("PENDING")?"Qualification":s.includes("PROCESSING")||s.includes("IN_PROGRESS")?"Negotiation":s.includes("COMPLETED")||s.includes("APPROVED")?"Closed Won":s.includes("CANCELLED")||s.includes("REJECTED")?"Closed Lost":"Proposal Sent"},x=t=>{if(!t)return 10;const s=t.toUpperCase();return s.includes("CREATED")?20:s.includes("PENDING")?40:s.includes("PROCESSING")?60:s.includes("COMPLETED")?100:s.includes("CANCELLED")?0:50},c=[{month:"Jan",deals:0,value:0,closed:0},{month:"Feb",deals:0,value:0,closed:0},{month:"Mar",deals:0,value:0,closed:0},{month:"Apr",deals:0,value:0,closed:0},{month:"May",deals:0,value:0,closed:0},{month:"Jun",deals:0,value:0,closed:0}],a=g.reduce((t,s)=>(t[s.stage]=(t[s.stage]||0)+1,t),{}),i=Object.keys(a).map(t=>({name:t,value:a[t]/g.length*100,deals:a[t]}));i.length===0&&i.push({name:"No Data",value:100,deals:0});const p=t=>{const s={id:`deal-${t.id}`,rawId:t.id,type:"deal",name:t.name,customer:t.customer,amount:t.amount,stage:t.stage,probability:t.probability,owner:t.owner||"Unassigned",dueDate:t.dueDate||"N/A",originalStatus:null};v(k=>[s,...k])};let r=g;b!=="all"&&(r=r.filter(t=>t.stage===b)),u!=="all"&&(r=r.filter(t=>t.owner===u));const y=g.length,E=g.reduce((t,s)=>t+Number(s.amount),0),L=y>0?Math.round(E/y):0,I=g.filter(t=>t.stage==="Closed Won").length,V=y>0?(I/y*100).toFixed(1):0,O=["#3B82F6","#8B5CF6","#EC4899","#F59E0B","#10B981","#EF4444"],[B,R]=o.useState(!1),[q,G]=o.useState(null),Q=t=>{G(t),R(!0)},K=(t,s)=>{v(k=>k.map(d=>d.id===t?{...d,owner:s}:d))},J=t=>{console.log("View deal:",t),alert(`Viewing Deal: ${t.name}
Customer: ${t.customer}
Amount: ₹${t.amount}
Stage: ${t.stage}`)},D=({stage:t,deals:s,color:k})=>e.jsxs("div",{className:"flex-1 min-w-[280px] bg-gray-50 dark:bg-gray-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:`flex items-center justify-between mb-4 pb-2 border-b-2 ${k}`,children:[e.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-200",children:t}),e.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs px-2 py-1 rounded-full",children:s.length})]}),e.jsxs("div",{className:"space-y-3",children:[s.map(d=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow group relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm line-clamp-2",children:d.name}),e.jsxs("span",{className:"text-xs font-bold text-gray-500",children:["₹",Number(d.amount).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:d.customer.split("@")[0]}),e.jsxs("span",{children:[d.probability,"%"]})]}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:e.jsx("div",{className:"bg-blue-500 h-1.5 rounded-full",style:{width:`${d.probability}%`}})}),e.jsx("div",{className:"mt-2 flex justify-between items-center text-xs",children:e.jsx("span",{className:`px-2 py-0.5 rounded-full ${d.owner==="Unassigned"?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:d.owner==="Unassigned"?"Unassigned":d.owner.split("@")[0]})}),e.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-gray-800/90 flex items-center justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity rounded",children:[e.jsx("button",{onClick:A=>{A.stopPropagation(),J(d)},className:"px-3 py-1 bg-blue-100 text-blue-600 rounded text-xs font-medium hover:bg-blue-200",children:"View"}),e.jsx("button",{onClick:A=>{A.stopPropagation(),Q(d)},className:"px-3 py-1 bg-purple-100 text-purple-600 rounded text-xs font-medium hover:bg-purple-200",children:"Assign"})]})]},d.id)),s.length===0&&e.jsx("div",{className:"text-center py-4 text-gray-400 text-sm italic",children:"No deals"})]})]});return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Deal Management"}),e.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-400",children:"Manage your sales pipeline and opportunities"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>w("list"),className:`p-2 rounded-md transition-all ${m==="list"?"bg-white dark:bg-gray-700 shadow text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:e.jsx(ye,{size:20})}),e.jsx("button",{onClick:()=>w("kanban"),className:`p-2 rounded-md transition-all ${m==="kanban"?"bg-white dark:bg-gray-700 shadow text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:e.jsx(pe,{size:20})})]}),e.jsx("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Add Deal"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(P,{title:"Total Pipeline Value",value:`₹${(E/1e5).toFixed(1)}L`,icon:e.jsx(ae,{className:"w-6 h-6"}),change:18.5,description:"All deals",bgColor:"bg-green-50",iconColor:"text-green-600"}),e.jsx(P,{title:"Active Deals",value:y.toString(),icon:e.jsx(le,{className:"w-6 h-6"}),change:12.3,description:"In pipeline",bgColor:"bg-blue-50",iconColor:"text-blue-600"}),e.jsx(P,{title:"Avg Deal Size",value:`₹${(L/1e3).toFixed(0)}K`,icon:e.jsx(re,{className:"w-6 h-6"}),change:5.2,description:"Per opportunity",bgColor:"bg-purple-50",iconColor:"text-purple-600"}),e.jsx(P,{title:"Win Rate",value:`${V}%`,icon:e.jsx(oe,{className:"w-6 h-6"}),change:3.8,description:"Last 30 days",bgColor:"bg-amber-50",iconColor:"text-amber-600"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(_,{title:"Deal Trend",subtitle:"Monthly deal value and count",children:e.jsx("div",{style:{width:"100%",height:300},children:e.jsx($,{width:"100%",height:"100%",children:e.jsxs(ne,{data:c,children:[e.jsx(ie,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(de,{dataKey:"month",stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(ce,{stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(F,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e.jsx(ue,{}),e.jsx(T,{type:"monotone",dataKey:"deals",stroke:"#3B82F6",strokeWidth:2,dot:{fill:"#3B82F6",r:4},name:"Total Deals"}),e.jsx(T,{type:"monotone",dataKey:"closed",stroke:"#10B981",strokeWidth:2,dot:{fill:"#10B981",r:4},name:"Closed Won"})]})})})})}),e.jsx(_,{title:"Pipeline by Stage",subtitle:"Deal distribution",children:e.jsx("div",{style:{width:"100%",height:300},children:e.jsx($,{width:"100%",height:"100%",children:e.jsxs(me,{children:[e.jsx(ge,{data:i,cx:"50%",cy:"50%",labelLine:!1,label:({name:t,value:s})=>`${t}: ${Math.round(s)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:i.map((t,s)=>e.jsx(xe,{fill:O[s%O.length]},`cell-${s}`))}),e.jsx(F,{})]})})})})]}),e.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg dark:bg-gray-900 dark:border-gray-800",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Filters"})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Stage"}),e.jsxs("select",{value:b,onChange:t=>h(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:border-gray-700 dark:bg-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Stages"}),e.jsx("option",{value:"Lead In",children:"Lead In"}),e.jsx("option",{value:"Qualification",children:"Qualification"}),e.jsx("option",{value:"Proposal Sent",children:"Proposal Sent"}),e.jsx("option",{value:"Negotiation",children:"Negotiation"}),e.jsx("option",{value:"Closed Won",children:"Closed Won"}),e.jsx("option",{value:"Closed Lost",children:"Closed Lost"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Owner"}),e.jsxs("select",{value:u,onChange:t=>n(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg dark:border-gray-700 dark:bg-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Owners"}),e.jsx("option",{value:"Alice Johnson",children:"Alice Johnson"}),e.jsx("option",{value:"Bob Smith",children:"Bob Smith"})]})]})]})]}),m==="list"?e.jsx(H,{loading:C,title:"Deal Details",columns:[{key:"name",label:"Deal Name"},{key:"customer",label:"Customer"},{key:"amount",label:"Amount",render:t=>`₹${Number(t).toLocaleString()}`},{key:"stage",label:"Stage",render:t=>e.jsx("span",{className:"px-3 py-1 text-xs font-semibold text-blue-700 bg-blue-100 rounded-full dark:bg-blue-900/20 dark:text-blue-400",children:t})},{key:"probability",label:"Probability",render:t=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-2 overflow-hidden bg-gray-200 rounded-full dark:bg-gray-700",children:e.jsx("div",{className:"h-2 bg-blue-500 rounded-full",style:{width:`${t}%`}})}),e.jsxs("span",{className:"text-xs font-semibold",children:[t,"%"]})]})},{key:"owner",label:"Owner"},{key:"dueDate",label:"Due Date"}],data:r,searchPlaceholder:"Search deals...",onAdd:()=>j(!0)}):e.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4",children:[e.jsx(D,{stage:"Lead In",deals:r.filter(t=>t.stage==="Lead In"),color:"border-gray-400"}),e.jsx(D,{stage:"Qualification",deals:r.filter(t=>t.stage==="Qualification"),color:"border-blue-400"}),e.jsx(D,{stage:"Proposal Sent",deals:r.filter(t=>t.stage==="Proposal Sent"),color:"border-purple-400"}),e.jsx(D,{stage:"Negotiation",deals:r.filter(t=>t.stage==="Negotiation"),color:"border-orange-400"}),e.jsx(D,{stage:"Closed Won",deals:r.filter(t=>t.stage==="Closed Won"),color:"border-green-400"}),e.jsx(D,{stage:"Closed Lost",deals:r.filter(t=>t.stage==="Closed Lost"),color:"border-red-400"})]}),e.jsx(fe,{isOpen:f,onClose:()=>j(!1),onDealAdded:p}),e.jsx(je,{isOpen:B,onClose:()=>R(!1),deal:q,onAssigned:K})]})};export{Fe as default};
