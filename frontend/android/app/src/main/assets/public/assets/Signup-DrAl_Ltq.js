import{j as e}from"./ui-Ch41-bI7.js";import{r as l,b as R,L as U}from"./vendor-Con1GFA2.js";import{a as N}from"./index-SiRpZdc4.js";import{A as F}from"./AppBackButton-BS7bEBpR.js";import"./utils-BMGruD9E.js";function q(){const[i,y]=l.useState(""),[o,S]=l.useState(""),[d,P]=l.useState(""),[c,f]=l.useState(""),[b,x]=l.useState(null),[m,h]=l.useState(null),[n,v]=l.useState(!1),[p,s]=l.useState(null),[D,C]=l.useState(!1),E=R(),I=t=>/\S+@\S+\.\S+/.test(t),A=t=>/^[0-9+\-() ]{7,20}$/.test(t),L=t=>{s(null);const r=t.target.files[0];if(r){if(!["image/jpeg","image/png","image/svg+xml"].includes(r.type)){s("Invalid file type. Please select a PNG, JPG, or SVG image."),x(null),h(null);return}x(r),h(URL.createObjectURL(r))}};l.useEffect(()=>()=>{m&&URL.revokeObjectURL(m)},[m]);const k=async t=>{var r,g,j,w;if(t.preventDefault(),s(null),!i||!o||!d||!c)return s("All fields are required");if(i.length<2||i.length>100)return s("Full name must be between 2 and 100 characters");if(!I(o))return s("Enter a valid email");if(!A(d))return s("Enter a valid phone number");if(c.length<8)return s("Password must be at least 8 characters");v(!0);try{const a=new FormData;a.append("fullName",i),a.append("email",o),a.append("phone",d),a.append("password",c),b&&a.append("profileImage",b),await N.signup(a);try{await N.requestEmailOtp({email:o})}catch(u){console.warn("Could not send OTP email:",(u==null?void 0:u.message)||u)}s("Signup successful! We've sent a verification code to your email."),C(!0),f(""),E(`/verify-otp?email=${encodeURIComponent(o)}`)}catch(a){s(((g=(r=a==null?void 0:a.response)==null?void 0:r.data)==null?void 0:g.error)||((w=(j=a==null?void 0:a.response)==null?void 0:j.data)==null?void 0:w.message)||"Signup failed. Try again later")}finally{v(!1)}};return e.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 relative",children:[e.jsx(F,{}),e.jsxs("div",{className:"w-full max-w-md p-6 bg-white rounded shadow-lg",children:[e.jsx("h2",{className:"mb-6 text-xl font-semibold text-center",children:"Create New Account"}),e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"flex flex-col items-center mb-4",children:[e.jsx("label",{htmlFor:"profile-image-upload",className:"cursor-pointer",children:e.jsx("img",{src:m||"https://via.placeholder.com/100?text=Avatar",alt:"Profile Preview",className:"w-24 h-24 rounded-full object-cover border-2 border-slate-300"})}),e.jsx("input",{id:"profile-image-upload",type:"file",accept:"image/png, image/jpeg, image/svg+xml",onChange:L,className:"hidden",disabled:n})]}),e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Full Name"}),e.jsx("input",{value:i,onChange:t=>y(t.target.value),disabled:n,className:"mt-2 w-full border border-slate-300 px-3 py-2 rounded focus:ring-[#003366] focus:border-[#003366] outline-none disabled:bg-slate-100",placeholder:"John Doe"}),e.jsx("label",{className:"block mt-4 text-sm font-medium text-slate-700",children:"Email"}),e.jsx("input",{type:"email",value:o,onChange:t=>S(t.target.value),disabled:n,className:"mt-2 w-full border border-slate-300 px-3 py-2 rounded focus:ring-[#003366] focus:border-[#003366] outline-none disabled:bg-slate-100",placeholder:"you@example.com"}),e.jsx("label",{className:"block mt-4 text-sm font-medium text-slate-700",children:"Phone"}),e.jsx("input",{value:d,onChange:t=>P(t.target.value),disabled:n,className:"mt-2 w-full border border-slate-300 px-3 py-2 rounded focus:ring-[#003366] focus:border-[#003366] outline-none disabled:bg-slate-100",placeholder:"9876543210"}),e.jsx("label",{className:"block mt-4 text-sm font-medium text-slate-700",children:"Password"}),e.jsx("input",{type:"password",value:c,onChange:t=>f(t.target.value),disabled:n,className:"mt-2 w-full border border-slate-300 px-3 py-2 rounded focus:ring-[#003366] focus:border-[#003366] outline-none disabled:bg-slate-100",placeholder:"Min 8 chars"}),e.jsx("button",{type:"submit",disabled:n,className:"w-full mt-6 bg-[#003366] text-white py-2 rounded hover:bg-[#002244] disabled:bg-slate-400 transition-colors",children:n?"Creating Account...":"Sign Up"})]}),p&&e.jsx("div",{className:`mt-4 p-2 text-center text-sm rounded ${p.includes("success")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:p}),e.jsxs("div",{className:"mt-4 text-center text-sm",children:["Already have an account?"," ",e.jsx(U,{to:"/login",className:"text-[#003366] font-medium hover:underline",children:"Log In"})]})]})]})}export{q as default};
