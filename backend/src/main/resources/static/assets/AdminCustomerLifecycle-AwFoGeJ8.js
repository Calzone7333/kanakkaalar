import{j as e}from"./ui-B7g2UBO6.js";import{r as s}from"./vendor-BMI_syx-.js";import{S as C}from"./StatCard-DjzQGce3.js";import{D as y}from"./DataTable-0K92KMlw.js";import{C as p}from"./ChartCard-DU5E-J_E.js";import{h as b}from"./index-BDeliUZK.js";import{U as j}from"./users-BQh29bYU.js";import{A as k}from"./activity-KUnTTAZC.js";import{T as v}from"./trending-up-BOumtRo8.js";import{C as S}from"./chart-column-BssLqYBS.js";import{R as L,e as N,C as w,X as T,Y as A,T as R,L as D,f as i}from"./charts-Dc25Mbj0.js";import{S as E}from"./square-pen-Tle_XUdp.js";import{T as F}from"./trash-2-pWo6kbbj.js";import"./trending-down-Cn0xuIKv.js";import"./plus-Be1FrqHs.js";import"./search-DIqVx3K5.js";import"./utils-Dw7OLvbZ.js";const Q=()=>{const[l,c]=s.useState([]),[m,d]=s.useState([]),[o,u]=s.useState({totalCustomers:0,activeCustomers:0,totalRevenue:0,churnRate:"0%"}),[n,x]=s.useState(!0),[r,h]=s.useState("");s.useEffect(()=>{(async()=>{try{const a=await b.getCustomerLifecycleData();c(a.data.customers),u(a.data.stats),d(a.data.lifecycleData)}catch(a){console.error("Failed to fetch customer data:",a)}finally{x(!1)}})()},[]);const g=[{title:"Total Customers",value:o.totalCustomers.toLocaleString(),icon:e.jsx(j,{className:"w-6 h-6"}),bgColor:"bg-blue-50",iconColor:"text-blue-600"},{title:"Active Customers",value:o.activeCustomers.toLocaleString(),icon:e.jsx(k,{className:"w-6 h-6"}),bgColor:"bg-green-50",iconColor:"text-green-600"},{title:"Total Revenue",value:`₹${o.totalRevenue.toLocaleString()}`,icon:e.jsx(v,{className:"w-6 h-6"}),bgColor:"bg-amber-50",iconColor:"text-amber-600"},{title:"Churn Rate",value:o.churnRate,icon:e.jsx(S,{className:"w-6 h-6"}),bgColor:"bg-red-50",iconColor:"text-red-600"}],f=s.useMemo(()=>r?l.filter(t=>t.name.toLowerCase().includes(r.toLowerCase())||t.email.toLowerCase().includes(r.toLowerCase())):l,[l,r]);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Customer Lifecycle Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Track and manage customer relationships across their entire lifecycle"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map((t,a)=>e.jsx(C,{...t,loading:n},a))}),e.jsx(p,{title:"Customer Lifecycle Trend",subtitle:"Monthly customer acquisition and churn",children:e.jsx(L,{width:"100%",height:350,children:e.jsxs(N,{data:m,children:[e.jsx(w,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(T,{dataKey:"month",stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(A,{stroke:"#9ca3af",style:{fontSize:"12px"}}),e.jsx(R,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e.jsx(D,{}),e.jsx(i,{type:"monotone",dataKey:"new",stroke:"#3B82F6",strokeWidth:2,dot:{fill:"#3B82F6",r:4}}),e.jsx(i,{type:"monotone",dataKey:"active",stroke:"#10B981",strokeWidth:2,dot:{fill:"#10B981",r:4}}),e.jsx(i,{type:"monotone",dataKey:"churned",stroke:"#EF4444",strokeWidth:2,dot:{fill:"#EF4444",r:4}})]})})}),e.jsx(y,{loading:n,title:"Customers",columns:[{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"phone",label:"Phone"},{key:"status",label:"Status",render:t=>e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${t==="Active"?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`,children:t})},{key:"revenue",label:"Revenue",render:t=>`₹${t.toLocaleString()}`},{key:"lastContact",label:"Last Contact"},{key:"actions",label:"Actions",render:(t,a)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>console.log("Edit:",a),className:"text-blue-600 hover:text-blue-800",children:e.jsx(E,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>console.log("Delete:",a.id),className:"text-red-600 hover:text-red-800",children:e.jsx(F,{className:"w-5 h-5"})})]})}],data:f,onAdd:()=>console.log("Add customer"),searchPlaceholder:"Search by name or email...",searchTerm:r,onSearchChange:t=>h(t.target.value)})]})};export{Q as default};
