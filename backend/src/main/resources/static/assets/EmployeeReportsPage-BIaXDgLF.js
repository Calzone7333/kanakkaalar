import{j as e}from"./ui-B7g2UBO6.js";import{r as x}from"./vendor-BMI_syx-.js";import{g as v,o as w}from"./index-BDeliUZK.js";import{C}from"./circle-check-big-BZh_LqAl.js";import{C as A}from"./clock-B7tJEkl6.js";import{T as D}from"./trending-up-BOumtRo8.js";import{A as T}from"./arrow-up-right-CFc7Hpp2.js";import{R as g,P as E,b as R,c as k,T as j,B as L,C as P,X as F,Y as S,d as p}from"./charts-Dc25Mbj0.js";import"./utils-Dw7OLvbZ.js";function G(){const[a,n]=x.useState([]),[o,c]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const s=v(),l=s==null?void 0:s.user;if(l!=null&&l.email){const i=await w.listAssigned(l.email);n(i.data||[])}}catch(s){console.error("Failed to fetch report data",s)}finally{c(!1)}})()},[]);const r=a.reduce((t,s)=>(t[s.status]=(t[s.status]||0)+1,t),{}),h=Object.keys(r).map(t=>({name:t.replace(/_/g," "),value:r[t]})),u=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"],f=a.reduce((t,s)=>{const i=new Date(s.createdAt).toLocaleString("default",{month:"short"}),m=t.find(N=>N.name===i);return m?(m.total++,s.status==="COMPLETED"&&m.completed++):t.push({name:i,total:1,completed:s.status==="COMPLETED"?1:0}),t},[]),b=a.length>0?Math.round(a.filter(t=>t.status==="COMPLETED").length/a.length*100):0,y=a.reduce((t,s)=>t+(s.totalAmount||0),0);return o?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Performance Reports"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Analytics and insights on your work performance."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(d,{title:"Completion Rate",value:`${b}%`,icon:e.jsx(C,{className:"w-5 h-5 text-emerald-600"}),trend:"+5.2%",color:"bg-emerald-50"}),e.jsx(d,{title:"Total Tasks",value:a.length,icon:e.jsx(A,{className:"w-5 h-5 text-blue-600"}),trend:"+12",color:"bg-blue-50"}),e.jsx(d,{title:"Revenue Impact",value:`â‚¹${(y/1e3).toFixed(1)}k`,icon:e.jsx(D,{className:"w-5 h-5 text-purple-600"}),trend:"+8.4%",color:"bg-purple-50"}),e.jsx(d,{title:"Avg. Turnaround",value:"2.4 Days",icon:e.jsx(T,{className:"w-5 h-5 text-amber-600"}),trend:"-0.5 Days",color:"bg-amber-50"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"Task Status Distribution"}),e.jsx("div",{className:"h-80 w-full",children:e.jsx(g,{width:"100%",height:"100%",children:e.jsxs(E,{children:[e.jsx(R,{data:h,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,fill:"#8884d8",paddingAngle:5,dataKey:"value",label:({name:t,percent:s})=>`${t} ${(s*100).toFixed(0)}%`,children:h.map((t,s)=>e.jsx(k,{fill:u[s%u.length]},`cell-${s}`))}),e.jsx(j,{})]})})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"Monthly Performance"}),e.jsx("div",{className:"h-80 w-full",children:e.jsx(g,{width:"100%",height:"100%",children:e.jsxs(L,{data:f.length>0?f:[{name:"Current",total:0,completed:0}],children:[e.jsx(P,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),e.jsx(F,{dataKey:"name",axisLine:!1,tickLine:!1}),e.jsx(S,{axisLine:!1,tickLine:!1}),e.jsx(j,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}}),e.jsx(p,{dataKey:"total",name:"Total Assigned",fill:"#e0e7ff",radius:[4,4,0,0]}),e.jsx(p,{dataKey:"completed",name:"Completed",fill:"#5E33AC",radius:[4,4,0,0]})]})})})]})]}),e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"Efficiency Metrics"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"On-Time Delivery"}),e.jsx("span",{className:"text-gray-900 font-bold",children:"92%"})]}),e.jsx("div",{className:"w-full bg-gray-100 rounded-full h-3",children:e.jsx("div",{className:"bg-emerald-500 h-3 rounded-full",style:{width:"92%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Client Satisfaction Score"}),e.jsx("span",{className:"text-gray-900 font-bold",children:"4.8 / 5.0"})]}),e.jsx("div",{className:"w-full bg-gray-100 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-500 h-3 rounded-full",style:{width:"96%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Document Accuracy"}),e.jsx("span",{className:"text-gray-900 font-bold",children:"98%"})]}),e.jsx("div",{className:"w-full bg-gray-100 rounded-full h-3",children:e.jsx("div",{className:"bg-purple-500 h-3 rounded-full",style:{width:"98%"}})})]})]})]})]})}function d({title:a,value:n,icon:o,trend:c,color:r}){return e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${r}`,children:o}),e.jsx("span",{className:"text-xs font-medium text-emerald-600 bg-emerald-50 px-2 py-1 rounded-full",children:c})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium mb-1",children:a}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:n})]})]})}export{G as default};
