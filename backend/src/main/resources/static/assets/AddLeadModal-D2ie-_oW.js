import{j as e}from"./ui-B7g2UBO6.js";import{r as l}from"./vendor-BMI_syx-.js";import{X as f,g as y,j}from"./index-BDeliUZK.js";const k=({isOpen:g,onClose:n,onLeadAdded:h})=>{const[s,c]=l.useState({name:"",email:"",phone:"",service:"",status:"New"}),[m,d]=l.useState(""),[u,x]=l.useState(!1),t=i=>{const{name:o,value:r}=i.target;c(a=>({...a,[o]:r}))},b=async i=>{var o,r;if(i.preventDefault(),!s.name||!s.email){d("Name and Email are required.");return}x(!0),d("");try{const{token:a}=y(),p=await j.post("/api/leads",s,{headers:{Authorization:`Bearer ${a}`}});h(p.data),n(),c({name:"",email:"",phone:"",service:"",status:"New"})}catch(a){d(((r=(o=a.response)==null?void 0:o.data)==null?void 0:r.message)||"Failed to add lead. Please try again."),console.error("Add lead error:",a)}finally{x(!1)}};return g?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-md relative",children:[e.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:e.jsx(f,{size:24})}),e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add New Lead"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:t,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:t,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),e.jsx("input",{type:"text",name:"phone",value:s.phone,onChange:t,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Service"}),e.jsx("input",{type:"text",name:"service",value:s.service,onChange:t,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{name:"status",value:s.status,onChange:t,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[e.jsx("option",{value:"New",children:"New"}),e.jsx("option",{value:"Contacted",children:"Contacted"}),e.jsx("option",{value:"Converted",children:"Converted"}),e.jsx("option",{value:"Lost",children:"Lost"})]})]}),m&&e.jsx("p",{className:"text-sm text-red-600",children:m}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-300",children:u?"Adding...":"Add Lead"})]})]})]})}):null};export{k as A};
