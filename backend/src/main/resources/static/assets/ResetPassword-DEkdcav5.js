import{j as s}from"./ui-B7g2UBO6.js";import{h as y,r as t,b as P}from"./vendor-BMI_syx-.js";import{a as C}from"./utils-Dw7OLvbZ.js";function E(){const[m]=y(),[n,d]=t.useState(""),[r,w]=t.useState(""),[l,g]=t.useState(""),[i,b]=t.useState(""),[c,u]=t.useState(!1),[x,o]=t.useState(null),j=P();t.useEffect(()=>{const e=m.get("email");e&&d(e)},[m]);const N=async e=>{var f,p,h;if((f=e==null?void 0:e.preventDefault)==null||f.call(e),!n||!r||!l)return o("Enter all fields");if(l!==i)return o("Passwords do not match");u(!0);try{await C.post("/api/auth/reset-password",{email:n,code:r,newPassword:l}),o("Password changed. Redirecting to login..."),setTimeout(()=>j("/login"),1e3)}catch(a){o(((h=(p=a==null?void 0:a.response)==null?void 0:p.data)==null?void 0:h.error)||(a==null?void 0:a.message)||"Reset failed")}finally{u(!1)}};return s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:s.jsxs("div",{className:"w-full max-w-md p-6 bg-white rounded shadow-lg",children:[s.jsx("h2",{className:"mb-4 text-xl font-semibold text-center",children:"Reset Password"}),s.jsxs("form",{onSubmit:N,children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Email"}),s.jsx("input",{value:n,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 mt-2 border rounded"}),s.jsx("label",{className:"block mt-4 text-sm font-medium text-slate-700",children:"OTP Code"}),s.jsx("input",{value:r,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 mt-2 border rounded"}),s.jsx("label",{className:"block mt-4 text-sm font-medium text-slate-700",children:"New Password"}),s.jsx("input",{type:"password",value:l,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 mt-2 border rounded"}),s.jsx("label",{className:"block mt-4 text-sm font-medium text-slate-700",children:"Confirm Password"}),s.jsx("input",{type:"password",value:i,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 mt-2 border rounded"}),s.jsx("button",{disabled:c,className:"mt-6 w-full bg-[#003366] text-white py-2 rounded",children:c?"Resetting...":"Reset Password"})]}),x&&s.jsx("div",{className:"mt-3 text-sm text-slate-700",children:x})]})})}export{E as default};
